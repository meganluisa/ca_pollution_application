<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="index.css"/>
        <link rel="stylesheet"
                href="//unpkg.com/leaflet/dist/leaflet.css"/>
        <script src="//unpkg.com/leaflet/dist/leaflet.js"></script>
        <title>CA Pollution App</title>
    </head>

    <body>
        
        <header id="header">
            <h1>California Pollution App</h1>
            <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
            <!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.ie.css" /><![endif]-->
            <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" type="text/css">
        </header>
        <div id="map" style="width: 100%; height: 600px"></div>

        <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
    
        <!-- Include this library for mobile touch support  -->
        <script src="http://cdnjs.cloudflare.com/ajax/libs/jqueryui-touch-punch/0.2.2/jquery.ui.touch-punch.min.js"></script>
    
    
        <script src="SliderControl.js"></script>
    
        <script>
        var terrain = L.tileLayer('http://tile.stamen.com/terrain/{z}/{x}/{y}.jpg'),
            streets =  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
            });
        
        var baseMaps = {
            "Terrain": terrain,
            "Streets": streets
        };

        var myMap = L.map('map', {
        center: [37.41907305286242, -117.61962890625001],
        zoom: 6,
        layers: [terrain, streets]
        });

        var sliderControl = null;
        $.getJSON("test.json", function(json) {
            var tri1987 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        year: "1987",
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1987") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR:</strong> " + year + "<br /> <strong>POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1988 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1988") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1989 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1989") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1990 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1990") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1991 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1991") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1992 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1992") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1993 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1993") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1994 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1994") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1995 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1995") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1996 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1996") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1997 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1997") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1998 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1998") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri1999 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "1999") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2000 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2000") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2001 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2001") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2002 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2002") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2003 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2003") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2004 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2004") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2005 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2005") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2006 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2006") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2007 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2007") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2008 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2008") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2009 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2009") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2010 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2010") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2011 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2011") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2012 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2012") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2013 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2013") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2014 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2014") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2015 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2015") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2016 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2016") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2017 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2017") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            var tri2018 = L.geoJson(json, {
                pointToLayer: function (feature, latlng) {  
                    return L.circleMarker(latlng, {
                        radius: 3.0,
                        fillColor: '#e1118e',
                        color: '#000000',
                        weight: 1,
                        opacity: 1.0,
                        fillOpacity: 1.0
                        })
                    },
                filter: function(feature, layer) {
                    if (feature.properties.year.substr(0,4) === "2018") {
                        return feature;
                    }
                },
                onEachFeature: function(feature, layer) {
                    var year = feature.properties.year.substr(0, 4);
                    var pollutant = feature.properties.pollutant;
                    var release = feature.properties.release;
                    var unit = feature.properties.unit;
                    var facility = feature.properties.f;
                    var facility_id = feature.properties.frs_id;
                    var industry = feature.properties.industry;
                    layer.bindPopup("<strong>YEAR: </strong>" + year + "<br /><strong> POLLUTANT: </strong>" + pollutant + "<br /><strong> RELEASE: </strong>" + release + " " + unit + "<br /><strong> FACILITY: </strong>" + facility + "<br /><strong> FACILITY ID: </strong>" + facility_id + "<br /><strong> INDUSTRY: </strong>" + industry, { maxWidth: 300, maxHeight: 200, autoPan: true, closeButton: true });
                }
            });
            group = new L.layerGroup();
            group.addLayer(tri1987);
            group.addLayer(tri1988);
            group.addLayer(tri1989);
            group.addLayer(tri1990);
            group.addLayer(tri1991);
            group.addLayer(tri1992);
            group.addLayer(tri1993);
            group.addLayer(tri1994);
            group.addLayer(tri1995);
            group.addLayer(tri1996);
            group.addLayer(tri1997);
            group.addLayer(tri1998);
            group.addLayer(tri1999);
            group.addLayer(tri2000);
            group.addLayer(tri2001);
            group.addLayer(tri2002);
            group.addLayer(tri2003);
            group.addLayer(tri2004);
            group.addLayer(tri2005);
            group.addLayer(tri2006);
            group.addLayer(tri2007);
            group.addLayer(tri2008);
            group.addLayer(tri2009);
            group.addLayer(tri2010);
            group.addLayer(tri2011);
            group.addLayer(tri2012);
            group.addLayer(tri2013);
            group.addLayer(tri2014);
            group.addLayer(tri2015);
            group.addLayer(tri2016);
            group.addLayer(tri2017);
            group.addLayer(tri2018);

        var overlayMaps = {
            "Toxic Release Inventory": group
            };
        var sliderControl = L.control.sliderControl({
            position: "topright",
            layer: group,
            timeAttribute: group.year,
            isEpoch: false,
            timeStrLength: 4,
            follow: 1,
            sameDate: true,
            });
        myMap.addControl(sliderControl);
        sliderControl.startSlider();

        L.control.layers(baseMaps, overlayMaps).addTo(myMap);
        // L.map('map').setView([37.41907305286242, -117.61962890625001], 6);
        // .addTo(myMap);
        })

    </script>
    </body>
</html>